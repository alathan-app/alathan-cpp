<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AlAthan — Custom Product Pages Package</title>
  <meta name="description" content="Apple-style scrolling story page for AlAthan Custom Product Pages with parallax hero, scroll-snap chapters, and sticky screenshot mock that changes as you scroll." />

  <!-- ✅ IMPORTANT (your screenshots)
    1) Put these 5 images in the SAME folder as this HTML file
    2) Rename them exactly to the names below:

      prayer_grid_light.jpg   (was: 81744E5A-1FE0-45A7-A489-8BCBE55E81B8.jpeg)
      lockscreen_iqama.jpg    (was: 9F9C51B4-AEF2-41FA-99F5-1F532BBBDFF7.jpeg)
      widgets_stack.jpg       (was: 96E21BEE-271F-482A-A875-AB11800DB5B7.jpeg)
      widgets_overview.jpg    (was: 4DB71897-5297-493A-ABD6-CF9418EFFB9F.jpeg)
      quran_radio.jpg         (was: E017DD81-B712-4CB9-BFF2-388F7726019F.jpeg)

    (Or keep your filenames and change ASSET_FILES in the JS.)
  -->

  <style>
    :root{
      --bg:#fbfbfd;
      --surface: rgba(255,255,255,.72);
      --surface-2: rgba(255,255,255,.56);
      --text:#1d1d1f;
      --muted:#6e6e73;
      --border: rgba(0,0,0,.10);
      --shadow-soft: 0 10px 30px rgba(0,0,0,.08);
      --radius:22px;
      --radius-lg:28px;
      --accent:#0071e3;
      --accent-2:#0a84ff;
      --ui:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text","Helvetica Neue",Arial,sans-serif;
      --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

      --max:1200px;
      --navH:56px;

      --chapterMinH:100vh;
      --phoneW:min(360px, 36vw);
      --phoneH:calc(var(--phoneW) * 2.10);
    }

    @media (prefers-color-scheme: dark){
      :root{
        --bg:#000;
        --surface: rgba(28,28,30,.78);
        --surface-2: rgba(28,28,30,.56);
        --text:#f5f5f7;
        --muted:#a1a1a6;
        --border: rgba(255,255,255,.14);
        --shadow-soft: 0 12px 34px rgba(0,0,0,.45);
        --accent:#0a84ff;
        --accent-2:#409cff;
      }
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--ui);
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      line-height: 1.45;
      overflow-x:hidden;
    }
    a{ color: var(--accent); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .container{ width:min(var(--max), calc(100% - 40px)); margin:0 auto; }

    /* Sticky nav */
    .nav{
      position:sticky; top:0; z-index:60;
      height:var(--navH);
      display:flex; align-items:center;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      background: color-mix(in oklab, var(--bg) 82%, transparent);
      border-bottom: 1px solid var(--border);
    }
    @supports not (color-mix(in oklab, red, blue)) {
      .nav { background: rgba(251,251,253,.82); }
      @media (prefers-color-scheme: dark){ .nav { background: rgba(0,0,0,.72); } }
    }

    .nav-inner{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
    }

    .brand{ display:flex; align-items:center; gap:12px; min-width:220px; }
    .logo{
      width:34px; height:34px; border-radius:12px;
      background:
        radial-gradient(18px 18px at 28% 28%, rgba(255,255,255,.85), rgba(255,255,255,0) 65%),
        linear-gradient(135deg, rgba(10,132,255,.92), rgba(0,113,227,.92));
      box-shadow: 0 12px 26px rgba(0,0,0,.14);
      border: 1px solid rgba(255,255,255,.16);
      flex:0 0 auto;
    }
    .brand h1{ margin:0; font-size:13.5px; font-weight:650; line-height:1.1; letter-spacing:.2px; }
    .brand p{ margin:2px 0 0; font-size:12px; color:var(--muted); }

    .nav-actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }

    .seg{
      display:flex; border:1px solid var(--border); border-radius:999px;
      overflow:hidden; background: var(--surface-2);
    }
    .seg button{
      border:0; background:transparent; padding:8px 10px;
      font-size:12.5px; color:var(--muted); cursor:pointer;
      transition: background .2s ease, color .2s ease;
    }
    .seg button.active{ background: rgba(0,113,227,.14); color: var(--text); }

    .btn{
      border:1px solid var(--border);
      background: var(--surface-2);
      color: var(--text);
      padding:9px 12px;
      border-radius:999px;
      font-size:12.5px;
      display:inline-flex; align-items:center; gap:8px;
      cursor:pointer; user-select:none;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color:#fff;
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 14px 28px rgba(0,113,227,.22);
    }

    /* HERO (parallax + your screenshot) */
    .hero{
      position:relative;
      height: clamp(660px, 98vh, 980px);
      overflow:hidden;
      border-bottom: 1px solid var(--border);
      background: var(--bg);
    }

    .hero-media{
      position:absolute; inset:0;
      transform: translateY(var(--pY, 0px)) scale(1.08);
      will-change: transform;
      transition: transform .06s linear;
    }
    .hero-media::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(1000px 700px at 20% 20%, rgba(0,113,227,.22), transparent 60%),
        radial-gradient(900px 640px at 82% 22%, rgba(64,156,255,.18), transparent 55%),
        radial-gradient(1100px 700px at 55% 88%, rgba(0,113,227,.12), transparent 62%);
      pointer-events:none;
      z-index: 2;
      mix-blend-mode: normal;
    }
    .hero-img{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit: cover;
      object-position: 50% 35%;
      filter: saturate(1.05) contrast(1.02);
      opacity: .34;
      z-index: 1;
      transform: translateZ(0);
    }
    @media (prefers-color-scheme: dark){
      .hero-img{ opacity: .22; }
      .hero-media::before{ mix-blend-mode: screen; }
    }

    .hero-overlay{
      position:absolute; inset:0;
      background: radial-gradient(1200px 700px at 50% 30%, rgba(255,255,255,.55), rgba(255,255,255,0) 60%);
      pointer-events:none;
      z-index: 3;
    }
    @media (prefers-color-scheme: dark){
      .hero-overlay{
        background: radial-gradient(1200px 700px at 50% 30%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%);
      }
    }

    .hero-inner{
      position:relative; z-index: 4;
      height:100%;
      display:flex; align-items:center;
    }

    .hero-grid{
      width:100%;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 28px;
      align-items:center;
    }
    @media (max-width: 980px){
      .hero-grid{ grid-template-columns:1fr; align-items:start; padding-top:40px; }
    }

    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      border:1px solid var(--border);
      padding:8px 12px; border-radius:999px;
      font-size:12.5px; color:var(--muted);
      background: var(--surface-2);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }
    .dot{
      width:8px;height:8px;border-radius:99px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 0 0 4px rgba(0,113,227,.12);
    }
    .hero h2{
      margin:14px 0 10px;
      font-size: clamp(38px, 5vw, 64px);
      letter-spacing: -0.035em;
      line-height: 1.02;
    }
    .hero p{ margin:0 0 18px; color:var(--muted); font-size:16px; max-width:70ch; }

    .panel{
      border:1px solid var(--border);
      background: var(--surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      overflow:hidden;
    }
    .panel.pad{ padding:18px; }
    .mini{ display:grid; gap:12px; }

    .field{
      border:1px solid var(--border);
      background: var(--surface-2);
      border-radius:18px;
      padding:14px;
    }
    .field label{
      display:block;
      font-size:11.5px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color: var(--muted);
      margin-bottom:8px;
    }
    .field .val{ font-size:14px; white-space: pre-wrap; }

    /* Scroll-snap chapters */
    .snap{ scroll-snap-type: y proximity; }
    .chapter{
      min-height: var(--chapterMinH);
      scroll-snap-align: start;
      display:flex;
      align-items:center;
      padding: 54px 0;
      border-bottom: 1px solid var(--border);
      background:
        radial-gradient(900px 520px at 18% 18%, rgba(0,113,227,.08), transparent 60%),
        radial-gradient(820px 520px at 82% 24%, rgba(64,156,255,.08), transparent 55%),
        var(--bg);
    }
    @media (prefers-color-scheme: dark){
      .chapter{
        background:
          radial-gradient(900px 520px at 18% 18%, rgba(10,132,255,.06), transparent 60%),
          radial-gradient(820px 520px at 82% 24%, rgba(64,156,255,.05), transparent 55%),
          var(--bg);
      }
    }

    .chapter-inner{
      width:100%;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      align-items:start;
    }
    @media (max-width: 980px){
      .chapter-inner{ grid-template-columns: 1fr; }
    }

    /* Sticky phone mock */
    .mock-wrap{
      position: sticky;
      top: calc(var(--navH) + 18px);
      height: calc(100vh - var(--navH) - 36px);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    @media (max-width: 980px){
      .mock-wrap{ position: relative; top:auto; height:auto; }
    }

    .phone{
      width: var(--phoneW);
      height: var(--phoneH);
      border-radius: 38px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.35));
      box-shadow: 0 26px 70px rgba(0,0,0,.14);
      position: relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    @media (prefers-color-scheme: dark){
      .phone{
        background: linear-gradient(180deg, rgba(28,28,30,.78), rgba(28,28,30,.42));
        box-shadow: 0 28px 80px rgba(0,0,0,.55);
      }
    }
    .phone::before{
      content:"";
      position:absolute;
      inset: 10px;
      border-radius: 30px;
      border: 1px solid rgba(255,255,255,.18);
      pointer-events:none;
      z-index: 5;
    }
    .island{
      position:absolute;
      top: 10px;
      left:50%;
      transform: translateX(-50%);
      width: 42%;
      height: 18px;
      border-radius: 999px;
      background: rgba(0,0,0,.35);
      opacity: .35;
      z-index: 6;
    }
    @media (prefers-color-scheme: dark){
      .island{ background: rgba(0,0,0,.62); opacity:.55; }
    }

    .mock{ position:absolute; inset:0; }

    /* Screens swap */
    .screen{
      position:absolute;
      inset:0;
      opacity:0;
      transform: scale(1.02) translateY(10px);
      transition: opacity .55s ease, transform .55s ease;
      will-change: opacity, transform;
    }
    .screen.active{
      opacity:1;
      transform: scale(1.0) translateY(0);
    }

    .screen .img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: 50% 20%;
      filter: saturate(1.05) contrast(1.02);
      transform: translateZ(0);
    }
    @media (prefers-color-scheme: dark){
      .screen .img{ filter: saturate(1.05) contrast(1.05); }
    }

    /* Apple-like overlay caption */
    .screen .caption{
      position:absolute;
      left: 14px;
      right: 14px;
      bottom: 14px;
      padding: 12px 12px;
      border-radius: 22px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.55);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      box-shadow: var(--shadow-soft);
      z-index: 4;
    }
    @media (prefers-color-scheme: dark){
      .screen .caption{ background: rgba(28,28,30,.62); }
    }
    .screen .caption .t{
      margin:0 0 4px;
      font-weight: 750;
      letter-spacing: -.02em;
      font-size: 13.5px;
    }
    .screen .caption .s{
      margin:0;
      color: var(--muted);
      font-size: 12.6px;
      line-height: 1.25;
    }

    .chapter h3{
      margin: 12px 0 10px;
      font-size: clamp(26px, 3.2vw, 42px);
      letter-spacing: -0.03em;
      line-height: 1.06;
    }
    .lead{ margin:0 0 16px; color:var(--muted); font-size:15.5px; max-width:70ch; }

    .meta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:14px;
      flex-wrap:wrap;
    }
    .badge{
      display:inline-flex;
      border: 1px solid var(--border);
      padding: 7px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: var(--muted);
      background: var(--surface-2);
      white-space: nowrap;
    }

    /* Bullet list drives screen swap */
    .bullets{ margin-top:14px; display:grid; gap:10px; }
    .bullet{
      padding:12px 14px;
      border-radius:18px;
      border:1px solid var(--border);
      background: var(--surface);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      box-shadow: var(--shadow-soft);
      cursor:pointer;
      transition: transform .18s ease, border-color .2s ease, background .2s ease;
    }
    .bullet:hover{ transform: translateY(-1px); }
    .bullet.active{
      border-color: rgba(0,113,227,.45);
      background: rgba(0,113,227,.08);
    }
    .bullet .k{ font-family: var(--mono); font-size:12px; color:var(--muted); margin:0 0 4px; }
    .bullet .t{ margin:0 0 4px; font-weight:650; letter-spacing:-.01em; font-size:14px; }
    .bullet .h{ margin:0; color:var(--muted); font-size:13px; line-height:1.3; }

    /* Dots */
    .dots{
      position: fixed;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      z-index: 55;
      display:flex;
      flex-direction:column;
      gap: 10px;
      padding: 10px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.35);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }
    @media (prefers-color-scheme: dark){
      .dots{ background: rgba(28,28,30,.35); }
    }
    @media (max-width: 980px){ .dots{ display:none; } }
    .dotbtn{
      width:8px;height:8px;border-radius:999px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.10);
      cursor:pointer;
      transition: transform .2s ease, background .2s ease;
    }
    @media (prefers-color-scheme: dark){ .dotbtn{ background: rgba(255,255,255,.10); } }
    .dotbtn.active{
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      transform: scale(1.25);
      border-color: rgba(255,255,255,.22);
    }

    /* Reveal */
    .reveal{
      opacity:0;
      transform: translateY(16px);
      transition: opacity .7s ease, transform .7s ease;
      will-change: opacity, transform;
    }
    .reveal.in{ opacity:1; transform: translateY(0); }

    /* RTL */
    .rtl{ direction:rtl; text-align:right; }
    .rtl .nav-inner{ direction:rtl; }
    .rtl .brand{ flex-direction: row-reverse; }
    .rtl .nav-actions{ justify-content:flex-start; }
    .rtl .dots{ right:auto; left:14px; }
    .rtl .field label{ letter-spacing:0; text-transform:none; font-weight:650; font-size:12px; }

    html{ scroll-behavior:smooth; }
    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      .reveal{ transition:none; transform:none; opacity:1; }
      .btn:hover, .bullet:hover{ transform:none; }
      .hero-media{ transition:none; }
      .screen{ transition:none; }
    }
  </style>
</head>

<body class="snap">
  <!-- Chapter dots -->
  <nav class="dots" aria-label="Chapter navigation" id="dots"></nav>

  <!-- Sticky nav -->
  <header class="nav" role="banner">
    <div class="container nav-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1 id="title">AlAthan — Custom Product Pages Package</h1>
          <p id="subtitle">Apple-style scrolling • chapters • real screenshots</p>
        </div>
      </div>

      <div class="nav-actions">
        <div class="seg" role="tablist" aria-label="Language">
          <button id="btn-en" class="active" role="tab" aria-selected="true" onclick="setLang('en')">EN</button>
          <button id="btn-ar" role="tab" aria-selected="false" onclick="setLang('ar')">AR</button>
        </div>
        <button class="btn" onclick="copyAll()">Copy All Copy</button>
        <a class="btn primary" href="#chapter-core_prayer">Start</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" id="hero">
    <div class="hero-media" id="heroMedia" aria-hidden="true">
      <!-- Uses your screenshot as full-bleed hero background -->
      <img class="hero-img" id="heroImg" alt="" />
    </div>
    <div class="hero-overlay" aria-hidden="true"></div>

    <div class="container hero-inner">
      <div class="hero-grid">
        <div class="reveal">
          <div class="kicker">
            <span class="dot" aria-hidden="true"></span>
            <span id="kicker">Apple-style Custom Product Pages — ready to paste</span>
          </div>

          <h2 id="heroTitle">Scroll. Snap. Show your real UI.</h2>
          <p id="heroDesc">
            This page uses your actual screenshots in a sticky “phone mock” that swaps as you scroll each bullet—just like Apple product pages.
          </p>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top: 14px;">
            <a class="btn primary" href="#chapter-core_prayer">Start scrolling</a>
            <button class="btn" onclick="copyAll()">Copy everything</button>
          </div>
        </div>

        <aside class="panel pad mini reveal">
          <div class="field">
            <label id="howToLabel">How to use</label>
            <div class="val" id="howTo">
              1) Create a Custom Product Page in App Store Connect<br/>
              2) Paste Subtitle + Promotional Text from each chapter<br/>
              3) Design screenshots following the storyboard bullets<br/>
              4) Map Apple Search Ads to each page URL
            </div>
          </div>
          <div class="field">
            <label id="notesLabel">Notes</label>
            <div class="val" id="notes">
              • Keep overlay text short (6–8 words).<br/>
              • Use clean backgrounds + whitespace.<br/>
              • Use localized screenshots for Arabic storefronts.
            </div>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <!-- CHAPTERS injected by JS -->
  <main id="chapters"></main>

  <!-- Footer -->
  <footer class="chapter" id="chapter-footer" style="border-bottom:none;">
    <div class="container chapter-inner">
      <div class="reveal">
        <h3 id="footerTitle">Ready for Search Ads.</h3>
        <p class="lead" id="footerText">
          Route each high-intent Apple Search Ads ad group to the matching Custom Product Page URL to improve conversion.
        </p>

        <div class="panel pad" style="margin-top:14px;">
          <div class="field" style="margin:0;">
            <label>Tip</label>
            <div class="val" id="tipText">
              Start with 4 pages: Prayer Times, Qibla, Ramadan, Apple Ecosystem. Track CVR per page and iterate screenshot #1 first.
            </div>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
            <a class="btn primary" href="#hero">Back to top</a>
            <button class="btn" onclick="copyAll()">Copy All</button>
          </div>
        </div>
      </div>

      <div class="mock-wrap reveal">
        <div class="phone" aria-label="Mock preview">
          <div class="island" aria-hidden="true"></div>
          <div class="mock">
            <div class="screen active">
              <img class="img" src="widgets_overview.jpg" alt="" />
              <div class="caption">
                <p class="t">AlAthan</p>
                <p class="s">Custom Product Pages • Apple-style storytelling</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // =========================
    // 1) FILE NAMES (edit if needed)
    // =========================
    const ASSET_FILES = {
      prayerGrid: "https://raw.githubusercontent.com/alathan-app/alathan-cpp/main/prayergridlight.jpg",
      lockscreenIqama: "https://raw.githubusercontent.com/alathan-app/alathan-cpp/main/lockscreen_iqama.png",
      widgetsStack: "https://raw.githubusercontent.com/alathan-app/alathan-cpp/main/widgetsstack.png",
      widgetsOverview: "https://raw.githubusercontent.com/alathan-app/alathan-cpp/main/widgetsOverview.png",
      quranRadio: "https://raw.githubusercontent.com/alathan-app/alathan-cpp/main/quranradio.png"
    };

    // Preload (smooth Apple-like swaps)
    function preloadImages(urls){
      urls.forEach(u => { const img = new Image(); img.src = u; });
    }

    // Use prayer grid as hero background (looks great full-bleed)
    document.getElementById("heroImg").src = ASSET_FILES.prayerGrid;

    // =========================
    // 2) CONTENT
    // =========================
    const PAGES = [
      {
        key: "core_prayer",
        en: {
          name: "Never Miss a Prayer",
          badge: "Core Conversion",
          subtitle: "Accurate Prayer Times. Smart Reminders.",
          promo: "Precise calculations, adjustable iqama, Live Activity countdown, and per-prayer settings to keep you on time—every day.",
          shots: [
            { t: "Never Miss a Prayer Again", h: "Hero: prayer grid with next prayer highlighted.", img: ASSET_FILES.prayerGrid },
            { t: "Live Countdown to Iqama", h: "Lock Screen Live Activity + Dynamic Island.", img: ASSET_FILES.lockscreenIqama },
            { t: "Widgets at a Glance", h: "Home + Lock Screen widgets in multiple sizes.", img: ASSET_FILES.widgetsOverview },
            { t: "Watch & Smart Stack", h: "Widget stack and compact glance UI.", img: ASSET_FILES.widgetsStack },
            { t: "Quran Radio Included", h: "Browse stations and start listening instantly.", img: ASSET_FILES.quranRadio }
          ],
          ads: [
            "Search Ads: prayer times, athan/adhan, salah, namaz time, أوقات الصلاة, اذان",
            "Use for: generic prayer keywords + Arabic high-intent terms"
          ]
        },
        ar: {
          name: "لا تفوّت أي صلاة",
          badge: "الصفحة الأساسية",
          subtitle: "أوقات دقيقة. تذكير ذكي.",
          promo: "طرق حساب متعددة، إقامة قابلة للتعديل، عدّ تنازلي مباشر، وإعدادات لكل صلاة لتبقى على الوقت—كل يوم.",
          shots: [
            { t: "لا تفوّت أي صلاة", h: "شبكة الأوقات مع إبراز الصلاة القادمة.", img: ASSET_FILES.prayerGrid },
            { t: "عدّ تنازلي للإقامة", h: "Live Activity على شاشة القفل + الجزيرة التفاعلية.", img: ASSET_FILES.lockscreenIqama },
            { t: "ويدجت بنظرة واحدة", h: "ويدجت للشاشة الرئيسية وشاشة القفل.", img: ASSET_FILES.widgetsOverview },
            { t: "الساعة وSmart Stack", h: "ويدجت مكدّسة ونظرة سريعة.", img: ASSET_FILES.widgetsStack },
            { t: "إذاعة القرآن", h: "اختر محطة وابدأ الاستماع فوراً.", img: ASSET_FILES.quranRadio }
          ],
          ads: [
            "إعلانات البحث: أوقات الصلاة، اذان/أذان، صلاة، مواقيت الصلاة، قبلة",
            "مناسبة لكلمات البحث العامة عالية النية"
          ]
        }
      },
      {
        key: "qibla",
        en: {
          name: "Qibla & Direction",
          badge: "High Intent",
          subtitle: "Find the Qibla Quickly — Anywhere",
          promo: "Real-time direction to the Kaaba with a clean interface that matches Apple’s design language. Great for daily use and travel.",
          shots: [
            { t: "Open. Align. Done.", h: "Keep overlays minimal—let the compass be the hero.", img: ASSET_FILES.widgetsOverview },
            { t: "Glance from Widgets", h: "Add a Qibla widget for quick access.", img: ASSET_FILES.widgetsStack },
            { t: "Match Your Setup", h: "Dark / light consistency across the app.", img: ASSET_FILES.prayerGrid },
            { t: "On the Lock Screen", h: "A compact tile can highlight Qibla entry.", img: ASSET_FILES.lockscreenIqama }
          ],
          ads: [
            "Search Ads: qibla compass, qibla direction, kaaba direction, اتجاه القبلة",
            "Use for: Qibla keywords (often lower CPA, high CVR)"
          ]
        },
        ar: {
          name: "القبلة والاتجاه",
          badge: "نية عالية",
          subtitle: "اعرف اتجاه القبلة بسرعة — أينما كنت",
          promo: "اتجاه مباشر نحو الكعبة بواجهة نظيفة وتناسق كامل مع أسلوب Apple. مثالية للاستخدام اليومي والسفر.",
          shots: [
            { t: "افتح. وجّه. انتهى.", h: "نصوص قليلة—دع البوصلة تتكلم.", img: ASSET_FILES.widgetsOverview },
            { t: "نظرة عبر الويدجت", h: "أضف ويدجت للوصول السريع.", img: ASSET_FILES.widgetsStack },
            { t: "تناسق داكن/فاتح", h: "اتساق التصميم في جميع الأوضاع.", img: ASSET_FILES.prayerGrid },
            { t: "على شاشة القفل", h: "ويدجت صغيرة للدخول للقبلة.", img: ASSET_FILES.lockscreenIqama }
          ],
          ads: [
            "إعلانات البحث: قبلة، اتجاه القبلة، بوصلة القبلة، اتجاه الكعبة",
            "مناسبة للكلمات المتخصصة وإعلانات السفر"
          ]
        }
      },
      {
        key: "ramadan",
        en: {
          name: "Ramadan Companion",
          badge: "Seasonal Lift",
          subtitle: "Designed for Ramadan",
          promo: "Prayer times, iftar countdown, and widgets that keep Ramadan moments close—without clutter.",
          shots: [
            { t: "Iftar Countdown", h: "Use the most emotional moment as screenshot #1.", img: ASSET_FILES.lockscreenIqama },
            { t: "At-a-glance Schedule", h: "Prayer grid helps users plan the day.", img: ASSET_FILES.prayerGrid },
            { t: "Widgets for Suhoor & Iftar", h: "Show compact widgets users actually keep.", img: ASSET_FILES.widgetsOverview },
            { t: "Quran Radio", h: "Highlight listening during Ramadan.", img: ASSET_FILES.quranRadio }
          ],
          ads: [
            "Search Ads: ramadan app, fasting time, suhoor reminder, iftar countdown",
            "Enable: 3–4 weeks before Ramadan; boost during peak days"
          ]
        },
        ar: {
          name: "رفيق رمضان",
          badge: "موسمي",
          subtitle: "مصمم لرمضان",
          promo: "أوقات الصلاة، عدّ تنازلي للإفطار، وويدجت تبقي لحظات رمضان قريبة—بدون زحمة.",
          shots: [
            { t: "عدّ تنازلي للإفطار", h: "اجعل اللحظة الأقوى هي الصورة الأولى.", img: ASSET_FILES.lockscreenIqama },
            { t: "جدول اليوم بنظرة", h: "شبكة الأوقات تساعد على التخطيط.", img: ASSET_FILES.prayerGrid },
            { t: "ويدجت للسحور والإفطار", h: "ويدجت مختصرة سيحتفظ بها المستخدم.", img: ASSET_FILES.widgetsOverview },
            { t: "إذاعة القرآن", h: "إبراز الاستماع في رمضان.", img: ASSET_FILES.quranRadio }
          ],
          ads: [
            "إعلانات البحث: رمضان، وقت الإفطار، وقت السحور، تطبيق رمضان",
            "تفعيل قبل رمضان بـ 3–4 أسابيع ورفع الميزانية في الذروة"
          ]
        }
      },
      {
        key: "apple_ecosystem",
        en: {
          name: "Apple Ecosystem",
          badge: "Premium Differentiator",
          subtitle: "Widgets, Lock Screen & Dynamic Island",
          promo: "Athan and iqama progress across Lock Screen, Dynamic Island, widgets, and Apple Watch—built to feel native.",
          shots: [
            { t: "Lock Screen Progress", h: "Live Activity: start at athan, end at iqama.", img: ASSET_FILES.lockscreenIqama },
            { t: "Widget Wall", h: "Show multiple widget sizes like Apple does.", img: ASSET_FILES.widgetsOverview },
            { t: "Smart Stack", h: "Perfect for glanceable moments.", img: ASSET_FILES.widgetsStack },
            { t: "Daily Overview", h: "Prayer grid ties it all together.", img: ASSET_FILES.prayerGrid }
          ],
          ads: [
            "Search Ads: widget app, apple watch prayer, dynamic island, lock screen",
            "Use for: premium/tech audience; often higher LTV"
          ]
        },
        ar: {
          name: "تكامل Apple",
          badge: "تميز فاخر",
          subtitle: "ويدجت • شاشة القفل • الجزيرة التفاعلية",
          promo: "تقدم الأذان والإقامة عبر شاشة القفل والجزيرة التفاعلية والويدجت والساعة—بتجربة تبدو أصلية.",
          shots: [
            { t: "تقدم على شاشة القفل", h: "Live Activity من الأذان حتى الإقامة.", img: ASSET_FILES.lockscreenIqama },
            { t: "جدار ويدجت", h: "أحجام متعددة بأسلوب Apple.", img: ASSET_FILES.widgetsOverview },
            { t: "Smart Stack", h: "مناسب للحظات النظرة السريعة.", img: ASSET_FILES.widgetsStack },
            { t: "نظرة يومية", h: "شبكة الأوقات تجمع كل شيء.", img: ASSET_FILES.prayerGrid }
          ],
          ads: [
            "إعلانات البحث: ويدجت، الجزيرة التفاعلية، شاشة القفل، Apple Watch",
            "مناسبة لجمهور التقنية وتجربة فاخرة"
          ]
        }
      }
    ];

    // Preload used images
    preloadImages(Object.values(ASSET_FILES));

    let LANG = "en";

    // ===== Build dots =====
    function renderDots(){
      const dots = document.getElementById("dots");
      dots.innerHTML = "";
      const items = ["hero", ...PAGES.map(p => `chapter-${p.key}`), "chapter-footer"];
      items.forEach((id, i) => {
        const b = document.createElement("div");
        b.className = "dotbtn" + (i===0 ? " active" : "");
        b.dataset.target = `#${id}`;
        b.addEventListener("click", () => {
          document.querySelector(b.dataset.target)?.scrollIntoView({ behavior:"smooth", block:"start" });
        });
        dots.appendChild(b);
      });
    }

    function setActiveDot(sectionId){
      const items = ["hero", ...PAGES.map(p => `chapter-${p.key}`), "chapter-footer"];
      const idx = items.indexOf(sectionId);
      if(idx < 0) return;
      document.querySelectorAll(".dotbtn").forEach((d,i)=> d.classList.toggle("active", i === idx));
    }

    // ===== Build chapters =====
    function renderChapters(){
      const host = document.getElementById("chapters");
      host.innerHTML = "";

      PAGES.forEach((p) => {
        const c = p[LANG];

        const bullets = c.shots.map((s,i)=>`
          <div class="bullet ${i===0 ? "active":""}" data-chapter="${p.key}" data-bullet="${i}">
            <p class="k">${LANG==="ar" ? "لقطة" : "Shot"} ${i+1}</p>
            <p class="t">${escapeHtml(s.t)}</p>
            <p class="h">${escapeHtml(s.h)}</p>
          </div>
        `).join("");

        const ads = c.ads.map(x=>`• ${x}`).join("\n");

        const screens = c.shots.map((s,i)=>`
          <div class="screen ${i===0 ? "active":""}" data-chapter="${p.key}" data-bullet="${i}">
            <img class="img" src="${escapeHtml(s.img)}" alt="" loading="eager" />
            <div class="caption">
              <p class="t">${escapeHtml(s.t)}</p>
              <p class="s">${escapeHtml(s.h)}</p>
            </div>
          </div>
        `).join("");

        const el = document.createElement("section");
        el.className = "chapter";
        el.id = `chapter-${p.key}`;
        el.dataset.key = p.key;

        el.innerHTML = `
          <div class="container chapter-inner">
            <div class="reveal">
              <div class="badge">${escapeHtml(c.badge)}</div>
              <h3>${escapeHtml(c.name)}</h3>
              <p class="lead">${escapeHtml(c.subtitle)}</p>

              <div class="panel pad" style="margin-top:10px;">
                <div class="field" style="margin:0;">
                  <label>Promotional Text</label>
                  <div class="val">${escapeHtml(c.promo)}</div>
                </div>

                <div class="field" style="margin-top:12px;">
                  <label>${LANG==="ar" ? "ملاحظات Apple Search Ads" : "Apple Search Ads Notes"}</label>
                  <div class="val">${escapeHtml(ads)}</div>
                </div>

                <div class="meta">
                  <button class="btn" onclick="copyPage('${p.key}')">${LANG==="ar" ? "نسخ هذا الفصل" : "Copy this chapter"}</button>
                  <a class="btn primary" href="#chapter-${p.key}">${LANG==="ar" ? "رابط" : "Link"}</a>
                </div>
              </div>

              <div class="bullets">${bullets}</div>
            </div>

            <div class="mock-wrap reveal">
              <div class="phone" aria-label="Sticky screenshot mock">
                <div class="island" aria-hidden="true"></div>
                <div class="mock">
                  ${screens}
                </div>
              </div>
            </div>
          </div>
        `;

        host.appendChild(el);
      });

      // click bullets
      document.querySelectorAll(".bullet").forEach(b => {
        b.addEventListener("click", () => {
          const chapter = b.getAttribute("data-chapter");
          const bullet = Number(b.getAttribute("data-bullet"));
          activateBullet(chapter, bullet, true);
        });
      });
    }

    // ===== Swap screens =====
    function activateBullet(chapterKey, bulletIndex, scrollIntoView=false){
      // bullets active
      document.querySelectorAll(`.bullet[data-chapter="${chapterKey}"]`).forEach(el => {
        el.classList.toggle("active", Number(el.getAttribute("data-bullet")) === bulletIndex);
      });

      // screens active
      document.querySelectorAll(`#chapter-${chapterKey} .screen`).forEach(el => {
        el.classList.toggle("active", Number(el.getAttribute("data-bullet")) === bulletIndex);
      });

      if(scrollIntoView){
        const el = document.querySelector(`.bullet[data-chapter="${chapterKey}"][data-bullet="${bulletIndex}"]`);
        el?.scrollIntoView({ behavior:"smooth", block:"center" });
      }
    }

    // ===== Observers =====
    let ioReveal, ioBullets, ioChapters;

    function wireObservers(){
      // reveal
      ioReveal?.disconnect();
      ioReveal = new IntersectionObserver((entries)=>{
        entries.forEach(e => { if(e.isIntersecting) e.target.classList.add("in"); });
      }, { threshold: 0.12 });
      document.querySelectorAll(".reveal").forEach(el => ioReveal.observe(el));

      // auto-advance bullet (drives screen swap)
      ioBullets?.disconnect();
      ioBullets = new IntersectionObserver((entries)=>{
        const visible = entries.filter(e=>e.isIntersecting);
        if(!visible.length) return;
        const best = visible.sort((a,b)=>b.intersectionRatio - a.intersectionRatio)[0];
        const chapter = best.target.getAttribute("data-chapter");
        const bullet = Number(best.target.getAttribute("data-bullet"));
        if(chapter && Number.isFinite(bullet)) activateBullet(chapter, bullet, false);
      }, { threshold: [0.2,0.35,0.55,0.75], rootMargin: "-25% 0px -55% 0px" });
      document.querySelectorAll(".bullet").forEach(el => ioBullets.observe(el));

      // chapters => dots
      ioChapters?.disconnect();
      ioChapters = new IntersectionObserver((entries)=>{
        const v = entries.filter(e=>e.isIntersecting).sort((a,b)=>b.intersectionRatio-a.intersectionRatio)[0];
        if(v) setActiveDot(v.target.id);
      }, { threshold:[0.25,0.45,0.6] });
      document.querySelectorAll(".chapter").forEach(el => ioChapters.observe(el));
    }

    // ===== Parallax =====
    function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
    function onScrollParallax(){
      const hero = document.getElementById("hero");
      const media = document.getElementById("heroMedia");
      if(!hero || !media) return;
      const rect = hero.getBoundingClientRect();
      const progress = clamp((-rect.top) / rect.height, 0, 1);
      const y = Math.round(progress * 52);
      media.style.setProperty("--pY", `${y * -1}px`);
    }

    // ===== Copy helpers =====
    function pageText(key){
      const p = PAGES.find(x => x.key === key);
      const c = p[LANG];
      const lines = [];
      lines.push(`=== ${c.name} ===`);
      lines.push(`Subtitle: ${c.subtitle}`);
      lines.push(`Promotional Text: ${c.promo}`);
      lines.push(`Storyboard:`);
      c.shots.forEach((s,i)=> lines.push(`  ${i+1}) ${s.t} — ${s.h}`));
      lines.push(`Apple Search Ads Notes:`);
      c.ads.forEach(a => lines.push(`  - ${a}`));
      return lines.join("\n");
    }

    async function copyPage(key){
      const txt = pageText(key);
      try{
        await navigator.clipboard.writeText(txt);
        toast(LANG==="ar" ? "تم النسخ ✅" : "Copied ✅");
      }catch(e){
        window.prompt(LANG==="ar" ? "انسخ النص التالي:" : "Copy the text below:", txt);
      }
    }

    async function copyAll(){
      const txt = PAGES.map(p => pageText(p.key)).join("\n\n");
      try{
        await navigator.clipboard.writeText(txt);
        toast(LANG==="ar" ? "تم نسخ كل النصوص ✅" : "Copied all ✅");
      }catch(e){
        window.prompt(LANG==="ar" ? "انسخ النص التالي:" : "Copy the text below:", txt);
      }
    }

    // toast
    let toastTimer=null;
    function toast(msg){
      clearTimeout(toastTimer);
      let el=document.getElementById("toast");
      if(!el){
        el=document.createElement("div");
        el.id="toast";
        el.style.position="fixed";
        el.style.left="50%";
        el.style.bottom="22px";
        el.style.transform="translateX(-50%)";
        el.style.padding="10px 12px";
        el.style.borderRadius="999px";
        el.style.border="1px solid rgba(255,255,255,.16)";
        el.style.background="rgba(28,28,30,.78)";
        el.style.backdropFilter="blur(14px)";
        el.style.webkitBackdropFilter="blur(14px)";
        el.style.color="white";
        el.style.fontSize="13px";
        el.style.boxShadow="0 14px 34px rgba(0,0,0,.35)";
        el.style.zIndex="999";
        document.body.appendChild(el);
      }
      el.textContent=msg;
      el.style.opacity="1";
      toastTimer=setTimeout(()=>{ el.style.opacity="0"; }, 1600);
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // ===== Language toggle =====
    function setLang(lang){
      LANG = lang;
      document.getElementById("btn-en").classList.toggle("active", lang==="en");
      document.getElementById("btn-ar").classList.toggle("active", lang==="ar");

      if(LANG === "ar"){
        document.documentElement.lang="ar";
        document.body.classList.add("rtl");
        document.getElementById("title").textContent="AlAthan — حزمة صفحات المنتج المخصصة";
        document.getElementById("subtitle").textContent="تمرير بأسلوب Apple • فصول • صور حقيقية";
        document.getElementById("kicker").textContent="حزمة صفحات منتج مخصصة بأسلوب Apple";
        document.getElementById("heroTitle").textContent="مرّر. انتقل. اعرض واجهتك الحقيقية.";
        document.getElementById("heroDesc").textContent="هذه الصفحة تستخدم صور تطبيقك داخل معاينة هاتف ثابتة تتغير تلقائياً أثناء التمرير—تماماً مثل صفحات Apple.";
        document.getElementById("howToLabel").textContent="طريقة الاستخدام";
        document.getElementById("notesLabel").textContent="ملاحظات";
      }else{
        document.documentElement.lang="en";
        document.body.classList.remove("rtl");
        document.getElementById("title").textContent="AlAthan — Custom Product Pages Package";
        document.getElementById("subtitle").textContent="Apple-style scrolling • chapters • real screenshots";
        document.getElementById("kicker").textContent="Apple-style Custom Product Pages — ready to paste";
        document.getElementById("heroTitle").textContent="Scroll. Snap. Show your real UI.";
        document.getElementById("heroDesc").textContent="This page uses your actual screenshots in a sticky phone mock that swaps as you scroll each bullet—like Apple product pages.";
        document.getElementById("howToLabel").textContent="How to use";
        document.getElementById("notesLabel").textContent="Notes";
      }

      renderDots();
      renderChapters();
      wireObservers();

      // reset first bullet active in each chapter
      PAGES.forEach(p => activateBullet(p.key, 0, false));
    }

    // init
    renderDots();
    renderChapters();
    wireObservers();
    PAGES.forEach(p => activateBullet(p.key, 0, false));

    onScrollParallax();
    window.addEventListener("scroll", onScrollParallax, { passive:true });
  </script>
</body>
</html>
