<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AlAthan</title>
  <meta name="description" content="Apple-style scrolling story page for AlAthan with sticky screenshots that swap as you scroll." />

  <style>
    :root{
      --bg:#fbfbfd;
      --surface: rgba(255,255,255,.72);
      --surface-2: rgba(255,255,255,.56);
      --text:#1d1d1f;
      --muted:#6e6e73;
      --border: rgba(0,0,0,.10);
      --shadow-soft: 0 10px 30px rgba(0,0,0,.08);
      --radius:22px;
      --radius-lg:28px;
      --accent:#0071e3;
      --accent-2:#0a84ff;
      --ui:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text","Helvetica Neue",Arial,sans-serif;
      --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

      --max:1200px;
      --navH:64px;

      --chapterMinH:100vh;

      /* desktop mock size */
      --phoneW:min(380px, 36vw);
      --phoneH:calc(var(--phoneW) * 2.08);
    }

    @media (prefers-color-scheme: dark){
      :root{
        --bg:#000;
        --surface: rgba(28,28,30,.78);
        --surface-2: rgba(28,28,30,.56);
        --text:#f5f5f7;
        --muted:#a1a1a6;
        --border: rgba(255,255,255,.14);
        --shadow-soft: 0 12px 34px rgba(0,0,0,.45);
        --accent:#0a84ff;
        --accent-2:#409cff;
      }
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--ui);
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      line-height: 1.45;
      overflow-x:hidden;
    }
    a{ color: var(--accent); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .container{ width:min(var(--max), calc(100% - 40px)); margin:0 auto; }

    /* Sticky nav */
    .nav{
      position:sticky; top:0; z-index:60;
      height:var(--navH);
      display:flex; align-items:center;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      background: color-mix(in oklab, var(--bg) 82%, transparent);
      border-bottom: 1px solid var(--border);
    }
    @supports not (color-mix(in oklab, red, blue)) {
      .nav { background: rgba(251,251,253,.82); }
      @media (prefers-color-scheme: dark){ .nav { background: rgba(0,0,0,.72); } }
    }
    .nav-inner{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      width:100%;
    }
    .brand{ display:flex; align-items:center; gap:12px; min-width:220px; }
    .logo{
      width:34px; height:34px; border-radius:12px;
      background:
        radial-gradient(18px 18px at 28% 28%, rgba(255,255,255,.85), rgba(255,255,255,0) 65%),
        linear-gradient(135deg, rgba(10,132,255,.92), rgba(0,113,227,.92));
      box-shadow: 0 12px 26px rgba(0,0,0,.14);
      border: 1px solid rgba(255,255,255,.16);
      flex:0 0 auto;
    }
    .brand h1{ margin:0; font-size:13.5px; font-weight:650; line-height:1.1; letter-spacing:.2px; }
    .brand p{ margin:2px 0 0; font-size:12px; color:var(--muted); }

    .nav-actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }

    .seg{
      display:flex; border:1px solid var(--border); border-radius:999px;
      overflow:hidden; background: var(--surface-2);
    }
    .seg button{
      border:0; background:transparent; padding:9px 12px;
      font-size:13px; color:var(--muted); cursor:pointer;
      transition: background .2s ease, color .2s ease;
    }
    .seg button.active{ background: rgba(0,113,227,.14); color: var(--text); }

    .btn{
      border:1px solid var(--border);
      background: var(--surface-2);
      color: var(--text);
      padding:9px 12px;
      border-radius:999px;
      font-size:13px;
      display:inline-flex; align-items:center; gap:8px;
      cursor:pointer; user-select:none;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color:#fff;
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 14px 28px rgba(0,113,227,.22);
    }

    /* HERO */
    .hero{
      position:relative;
      height: clamp(640px, 92vh, 980px);
      overflow:hidden;
      border-bottom: 1px solid var(--border);
      background: var(--bg);
    }
    .hero-media{
      position:absolute; inset:0;
      transform: translateY(var(--pY, 0px)) scale(1.08);
      will-change: transform;
      transition: transform .06s linear;
    }
    .hero-media::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(1000px 700px at 20% 20%, rgba(0,113,227,.22), transparent 60%),
        radial-gradient(900px 640px at 82% 22%, rgba(64,156,255,.18), transparent 55%),
        radial-gradient(1100px 700px at 55% 88%, rgba(0,113,227,.12), transparent 62%);
      pointer-events:none;
      z-index: 2;
    }
    .hero-img{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit: cover;
      object-position: 50% 35%;
      opacity: .34;
      z-index: 1;
      transform: translateZ(0);
      filter: saturate(1.04) contrast(1.02);
    }
    @media (prefers-color-scheme: dark){
      .hero-img{ opacity: .20; }
      .hero-media::before{ mix-blend-mode: screen; }
    }
    .hero-overlay{
      position:absolute; inset:0;
      background: radial-gradient(1200px 700px at 50% 30%, rgba(255,255,255,.55), rgba(255,255,255,0) 60%);
      pointer-events:none;
      z-index: 3;
    }
    @media (prefers-color-scheme: dark){
      .hero-overlay{
        background: radial-gradient(1200px 700px at 50% 30%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%);
      }
    }
    .hero-inner{
      position:relative; z-index: 4;
      height:100%;
      display:flex; align-items:center;
    }
    .hero-grid{
      width:100%;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 28px;
      align-items:center;
    }
    @media (max-width: 980px){
      .hero{ height:auto; padding: 84px 0 40px; }
      .hero-media, .hero-overlay{ display:none; }
      .hero-grid{ grid-template-columns:1fr; align-items:start; }
    }

    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      border:1px solid var(--border);
      padding:8px 12px; border-radius:999px;
      font-size:12.5px; color:var(--muted);
      background: var(--surface-2);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }
    .dot{
      width:8px;height:8px;border-radius:99px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 0 0 4px rgba(0,113,227,.12);
    }
    .hero h2{
      margin:14px 0 10px;
      font-size: clamp(38px, 5vw, 64px);
      letter-spacing: -0.035em;
      line-height: 1.02;
    }
    .hero p{ margin:0 0 18px; color:var(--muted); font-size:16px; max-width:70ch; }

    .panel{
      border:1px solid var(--border);
      background: var(--surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      overflow:hidden;
    }
    .panel.pad{ padding:18px; }

    .field{
      border:1px solid var(--border);
      background: var(--surface-2);
      border-radius:18px;
      padding:14px;
    }
    .field label{
      display:block;
      font-size:11.5px;
      letter-spacing:.08em;
      text-transform:uppercase;
      color: var(--muted);
      margin-bottom:8px;
    }
    .field .val{
      font-size:14px;
      white-space: pre-wrap;
    }

    /* CHAPTERS */
    .chapter{
      min-height: var(--chapterMinH);
      display:flex;
      align-items:center;
      padding: 56px 0;
      border-bottom: 1px solid var(--border);
      background:
        radial-gradient(900px 520px at 18% 18%, rgba(0,113,227,.08), transparent 60%),
        radial-gradient(820px 520px at 82% 24%, rgba(64,156,255,.08), transparent 55%),
        var(--bg);
    }
    @media (prefers-color-scheme: dark){
      .chapter{
        background:
          radial-gradient(900px 520px at 18% 18%, rgba(10,132,255,.06), transparent 60%),
          radial-gradient(820px 520px at 82% 24%, rgba(64,156,255,.05), transparent 55%),
          var(--bg);
      }
    }

    .chapter-inner{
      width:100%;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 28px;
      align-items:start;
    }
    @media (max-width: 980px){
      .chapter{ min-height:auto; padding: 52px 0; }
      .chapter-inner{ grid-template-columns: 1fr; }
    }

    /* Sticky phone mock */
    .mock-wrap{
      position: sticky;
      top: calc(var(--navH) + 18px);
      height: calc(100vh - var(--navH) - 36px);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    @media (max-width: 980px){
      .mock-wrap{
        position: relative;
        top:auto;
        height:auto;
        justify-content:flex-start;
      }
    }

    .phone{
      width: var(--phoneW);
      height: var(--phoneH);
      border-radius: 38px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.35));
      box-shadow: 0 26px 70px rgba(0,0,0,.14);
      position: relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    @media (max-width: 980px){
      :root{
        --phoneW: min(420px, 92vw);
        --phoneH: calc(var(--phoneW) * 2.04);
      }
      .phone{
        border-radius: 32px;
      }
    }
    @media (prefers-color-scheme: dark){
      .phone{
        background: linear-gradient(180deg, rgba(28,28,30,.78), rgba(28,28,30,.42));
        box-shadow: 0 28px 80px rgba(0,0,0,.55);
      }
    }
    .phone::before{
      content:"";
      position:absolute;
      inset: 10px;
      border-radius: 30px;
      border: 1px solid rgba(255,255,255,.18);
      pointer-events:none;
      z-index: 5;
    }
    .island{
      position:absolute;
      top: 10px;
      left:50%;
      transform: translateX(-50%);
      width: 42%;
      height: 18px;
      border-radius: 999px;
      background: rgba(0,0,0,.35);
      opacity: .35;
      z-index: 6;
    }
    @media (prefers-color-scheme: dark){
      .island{ background: rgba(0,0,0,.62); opacity:.55; }
    }

    .mock{ position:absolute; inset:0; }

    .screen{
      position:absolute;
      inset:0;
      opacity:0;
      transform: scale(1.02) translateY(10px);
      transition: opacity .55s ease, transform .55s ease;
      will-change: opacity, transform;
    }
    .screen.active{
      opacity:1;
      transform: scale(1.0) translateY(0);
    }

    .screen .img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: 50% 20%;
      transform: translateZ(0);
    }

    .screen .caption{
      position:absolute;
      left: 14px;
      right: 14px;
      bottom: 14px;
      padding: 12px 12px;
      border-radius: 22px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.55);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      box-shadow: var(--shadow-soft);
      z-index: 4;
    }
    @media (prefers-color-scheme: dark){
      .screen .caption{ background: rgba(28,28,30,.62); }
    }
    .screen .caption .t{
      margin:0 0 4px;
      font-weight: 750;
      letter-spacing: -.02em;
      font-size: 13.5px;
    }
    .screen .caption .s{
      margin:0;
      color: var(--muted);
      font-size: 12.6px;
      line-height: 1.25;
    }

    .chapter h3{
      margin: 12px 0 10px;
      font-size: clamp(26px, 3.2vw, 42px);
      letter-spacing: -0.03em;
      line-height: 1.06;
    }
    .lead{ margin:0 0 12px; color:var(--muted); font-size:15.5px; max-width:70ch; }

    .badge{
      display:inline-flex;
      border: 1px solid var(--border);
      padding: 7px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: var(--muted);
      background: var(--surface-2);
      white-space: nowrap;
    }

    .bullets{ margin-top:14px; display:grid; gap:10px; }
    .bullet{
      padding:12px 14px;
      border-radius:18px;
      border:1px solid var(--border);
      background: var(--surface);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      box-shadow: var(--shadow-soft);
      cursor:pointer;
      transition: transform .18s ease, border-color .2s ease, background .2s ease;
    }
    .bullet:hover{ transform: translateY(-1px); }
    .bullet.active{
      border-color: rgba(0,113,227,.45);
      background: rgba(0,113,227,.08);
    }
    .bullet .k{ font-family: var(--mono); font-size:12px; color:var(--muted); margin:0 0 4px; }
    .bullet .t{ margin:0 0 4px; font-weight:650; letter-spacing:-.01em; font-size:14px; }
    .bullet .h{ margin:0; color:var(--muted); font-size:13px; line-height:1.3; }

    /* reveal */
    .reveal{
      opacity:0;
      transform: translateY(16px);
      transition: opacity .7s ease, transform .7s ease;
      will-change: opacity, transform;
    }
    .reveal.in{ opacity:1; transform: translateY(0); }

    /* RTL */
    .rtl{ direction:rtl; text-align:right; }
    .rtl .nav-inner{ direction:rtl; }
    .rtl .brand{ flex-direction: row-reverse; }
    .rtl .nav-actions{ justify-content:flex-start; }
    .rtl .field label{ letter-spacing:0; text-transform:none; font-weight:650; font-size:12px; }

    html{ scroll-behavior:smooth; }
    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      .reveal{ transition:none; transform:none; opacity:1; }
      .btn:hover, .bullet:hover{ transform:none; }
      .hero-media{ transition:none; }
      .screen{ transition:none; }
    }
  </style>
</head>

<body>
  <!-- Sticky nav -->
  <header class="nav" role="banner">
    <div class="container nav-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1 id="navTitle">AlAthan</h1>
          <p id="navSub">Prayer times â€¢ Qibla â€¢ Lock Screen</p>
        </div>
      </div>

      <div class="nav-actions">
        <div class="seg" role="tablist" aria-label="Language">
          <button id="btn-en" class="active" role="tab" aria-selected="true" type="button">EN</button>
          <button id="btn-ar" role="tab" aria-selected="false" type="button">AR</button>
        </div>
        <a class="btn primary" href="#chapter-prayer" id="startBtn">Start</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" id="hero">
    <div class="hero-media" id="heroMedia" aria-hidden="true">
      <img class="hero-img" id="heroImg" alt="" />
    </div>
    <div class="hero-overlay" aria-hidden="true"></div>

    <div class="container hero-inner">
      <div class="hero-grid">
        <div class="reveal">
          <div class="kicker">
            <span class="dot" aria-hidden="true"></span>
            <span id="heroKicker">Designed to feel native.</span>
          </div>

          <h2 id="heroTitle">Your daily prayer companion.</h2>
          <p id="heroDesc">
            Accurate prayer times, a live Qibla compass, and smart countdowns on your Lock Screen and Dynamic Island.
          </p>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;">
            <a class="btn primary" href="#features" id="featuresBtn">App features</a>
            <a class="btn" href="#chapter-prayer" id="scrollBtn">Start scrolling</a>
          </div>
        </div>

        <!-- FEATURES PANEL -->
        <aside class="panel pad reveal" id="features">
          <div class="field" style="margin:0;">
            <label id="featuresLabel">App features</label>
            <div class="val" id="featuresText"></div>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <!-- CHAPTERS injected by JS -->
  <main id="chapters"></main>

  <script>
    // ==========================================================
    // 1) ASSETS (LIGHT/DARK) â€” ONLY EDIT URLS HERE
    // ==========================================================
    const BASE = "https://alathan-app.github.io/alathan-cpp/";

    // Put your real filenames here.
    // Example: prayer_grid_light.jpg / prayer_grid_dark.jpg
    const ASSETS = {
      prayerGrid: {
        light: BASE + "prayer_grid_light.png",
        dark:  BASE + "prayer_grid_dark.png"
      },
      lockscreenIqama: {
        light: BASE + "lockscreen_iqama_light.png",
        dark:  BASE + "lockscreen_iqama_dark.png"
      },
      widgetsStack: {
        light: BASE + "widgets_stack_light.png",
        dark:  BASE + "widgets_stack_dark.png"
      },
      widgetsOverview: {
        light: BASE + "widgets_overview_light.png",
        dark:  BASE + "widgets_overview_dark.png"
      },
      quranRadio: {
        light: BASE + "quran_radio_light.png",
        dark:  BASE + "quran_radio_dark.png"
      }
    };

    const mqDark = window.matchMedia("(prefers-color-scheme: dark)");
    const theme = () => (mqDark.matches ? "dark" : "light");
    const asset = (key) => (ASSETS[key] ? ASSETS[key][theme()] : "");

    function preloadImages(urls){
      urls.forEach(u => { if(!u) return; const img = new Image(); img.src = u; });
    }

    // Preload all current theme urls + opposite theme urls
    preloadImages(Object.values(ASSETS).flatMap(v => [v.light, v.dark]));

    // Set hero image (will auto update on theme change)
    const heroImg = document.getElementById("heroImg");
    heroImg.src = asset("prayerGrid");

    // ==========================================================
    // 2) FEATURES (EN/AR)
    // ==========================================================
    const FEATURES = {
      en: [
        "ğŸŒ™ AlAthan â€” your daily prayer companion",
        "âœ¨ Accurate prayer times based on your location",
        "ğŸ§­ Live Qibla compass towards the Kaaba",
        "â³ Smart countdown on Lock Screen and Dynamic Island",
        "ğŸ”” So you never miss a prayer",
        "",
        "ğŸš€ Features & functionality",
        "",
        "ğŸ•Œ Prayer times â€” location or any city; multiple calculation methods; Hijri date + moon phase",
        "ğŸ§­ Qibla compass â€” real-time direction; degree accuracy; works offline",
        "ğŸ”” Notifications â€” multiple Athan sounds; pre-prayer reminders (5â€“30 min); adjustable iqama (5/10/15); per-prayer settings; mute all anytime",
        "â³ Live Activity & Dynamic Island â€” live iqama countdown; progress from athan â†’ iqama; starts near prayer time and ends at iqama",
        "ğŸ§© Widgets â€” Home + Lock Screen widgets; next prayer + countdown + progress; Apple Watch support",
        "ğŸ“» Quran Radio â€” continuous recitation; multiple reciters/stations (third-party sources)",
        "â­ More â€” 25+ languages; CarPlay; light/dark mode; privacy-first (location & times stay on device; no marketing use)",
        "",
        "ğŸ’™ Simplicity â€¢ Accuracy â€¢ Privacy"
      ],
      ar: [
        "ğŸŒ™ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø°Ø§Ù† â€” Ø±ÙÙŠÙ‚Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„ØµÙ„Ø§Ø©",
        "âœ¨ Ø£ÙˆÙ‚Ø§Øª ØµÙ„Ø§Ø© Ø¯Ù‚ÙŠÙ‚Ø© Ø­Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ",
        "ğŸ§­ Ø¨ÙˆØµÙ„Ø© Ù‚Ø¨Ù„Ø© Ø­ÙŠÙ‘Ø© Ø¨Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙƒØ¹Ø¨Ø©",
        "â³ Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ø°ÙƒÙŠ Ø¹Ù„Ù‰ Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ ÙˆØ§Ù„Ø¬Ø²ÙŠØ±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©",
        "ğŸ”” Ø­ØªÙ‰ Ù„Ø§ ØªÙÙˆØªÙƒ Ø§Ù„ØµÙ„Ø§Ø© Ø£Ø¨Ø¯Ø§Ù‹",
        "",
        "ğŸš€ Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„ÙˆØ¸Ø§Ø¦Ù",
        "",
        "ğŸ•Œ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© â€” Ø­Ø³Ø¨ Ù…ÙˆÙ‚Ø¹Ùƒ Ø£Ùˆ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©Ø› Ø·Ø±Ù‚ Ø­Ø³Ø§Ø¨ Ù…ØªØ¹Ø¯Ø¯Ø©Ø› Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ + Ø·ÙˆØ± Ø§Ù„Ù‚Ù…Ø±",
        "ğŸ§­ Ø¨ÙˆØµÙ„Ø© Ø§Ù„Ù‚Ø¨Ù„Ø© â€” Ø§ØªØ¬Ø§Ù‡ Ø­ÙŠØ› Ù‚Ø±Ø§Ø¡Ø© Ø¨Ø§Ù„Ø¯Ø±Ø¬Ø§ØªØ› ØªØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª",
        "ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª â€” Ø£ØµÙˆØ§Øª Ø£Ø°Ø§Ù† Ù…ØªØ¹Ø¯Ø¯Ø©Ø› ØªØ°ÙƒÙŠØ± Ù¥â€“Ù£Ù  Ø¯Ù‚ÙŠÙ‚Ø©Ø› Ø¥Ù‚Ø§Ù…Ø© Ù¥/Ù¡Ù /Ù¡Ù¥Ø› Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„ÙƒÙ„ ØµÙ„Ø§Ø©Ø› Ø®ÙŠØ§Ø± Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒÙ„",
        "â³ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙˆØ§Ù„Ø¬Ø²ÙŠØ±Ø© â€” Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ø­ÙŠØ› ØªÙ‚Ø¯Ù… Ù…Ù† Ø§Ù„Ø£Ø°Ø§Ù† â†’ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©Ø› ÙŠØ¨Ø¯Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆÙŠÙ†ØªÙ‡ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©",
        "ğŸ§© Ø§Ù„ÙˆÙŠØ¯Ø¬Øª â€” Ù„Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„Ù‚ÙÙ„Ø› Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© + Ø§Ù„Ø¹Ø¯Ù‘ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ + Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…Ø› Ø¯Ø¹Ù… Apple Watch",
        "ğŸ“» Ø±Ø§Ø¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù† â€” ØªÙ„Ø§ÙˆØ© Ù…ØªÙˆØ§ØµÙ„Ø©Ø› Ù…Ù‚Ø±Ø¦ÙˆÙ† ÙˆÙ…Ø­Ø·Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©Ø› Ù…Ù† Ù…ØµØ§Ø¯Ø± Ø·Ø±Ù Ø«Ø§Ù„Ø«",
        "â­ Ø§Ù„Ù…Ø²ÙŠØ¯ â€” Ø£ÙƒØ«Ø± Ù…Ù† 25 Ù„ØºØ©Ø› CarPlayØ› Ù…Ø¸Ù‡Ø± Ø¯Ø§ÙƒÙ† ÙˆÙØ§ØªØ­Ø› Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ø£ÙˆÙ„Ø§Ù‹ (Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø£ÙˆÙ‚Ø§Øª Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ)",
        "",
        "ğŸ’™ Ø§Ù„Ø¨Ø³Ø§Ø·Ø© â€¢ Ø§Ù„Ø¯Ù‚Ø© â€¢ Ø§Ù„Ø®ØµÙˆØµÙŠØ©"
      ]
    };

    // ==========================================================
    // 3) CHAPTERS (EN/AR) â€” drives sticky screenshot swaps
    // ==========================================================
    const CHAPTERS = [
      {
        key: "prayer",
        en: {
          badge: "Prayer times",
          title: "Accurate prayer times. Clean at a glance.",
          lead: "A calm grid that makes the next prayer obvious â€” with Hijri date and moon phase.",
          bullets: [
            { t: "At-a-glance schedule", h: "Your day in one clean view.", img: "prayerGrid" },
            { t: "Live countdown", h: "Lock Screen + Dynamic Island focus.", img: "lockscreenIqama" },
            { t: "Widgets that stay", h: "Home + Lock Screen widgets in multiple sizes.", img: "widgetsOverview" }
          ]
        },
        ar: {
          badge: "Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©",
          title: "Ø£ÙˆÙ‚Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø©. Ù†Ø¸Ø±Ø© ÙˆØ§Ø¶Ø­Ø©.",
          lead: "Ø´Ø¨ÙƒØ© Ù‡Ø§Ø¯Ø¦Ø© ØªÙØ¨Ø±Ø² Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© â€” Ù…Ø¹ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ ÙˆØ·ÙˆØ± Ø§Ù„Ù‚Ù…Ø±.",
          bullets: [
            { t: "Ø¬Ø¯ÙˆÙ„ Ø¨Ù†Ø¸Ø±Ø© ÙˆØ§Ø­Ø¯Ø©", h: "ÙŠÙˆÙ…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ø´Ø§Ø´Ø© ÙˆØ§Ø­Ø¯Ø©.", img: "prayerGrid" },
            { t: "Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ø­ÙŠ", h: "Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ + Ø§Ù„Ø¬Ø²ÙŠØ±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©.", img: "lockscreenIqama" },
            { t: "ÙˆÙŠØ¯Ø¬Øª ØªØ¨Ù‚Ù‰ Ù…Ø¹Ùƒ", h: "ÙˆÙŠØ¯Ø¬Øª Ù„Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„Ù‚ÙÙ„.", img: "widgetsOverview" }
          ]
        }
      },
      {
        key: "qibla",
        en: {
          badge: "Qibla",
          title: "Live Qibla, made simple.",
          lead: "A clean experience that feels native â€” perfect for daily use and travel.",
          bullets: [
            { t: "Open. Align. Done.", h: "Minimal overlays, maximum clarity.", img: "widgetsStack" },
            { t: "Offline-ready", h: "Works without internet.", img: "widgetsStack" },
            { t: "Matches your setup", h: "Light/Dark consistency.", img: "prayerGrid" }
          ]
        },
        ar: {
          badge: "Ø§Ù„Ù‚Ø¨Ù„Ø©",
          title: "Ù‚Ø¨Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø©â€¦ Ø¨Ø¨Ø³Ø§Ø·Ø©.",
          lead: "ØªØ¬Ø±Ø¨Ø© Ù†Ø¸ÙŠÙØ© ØªØ¨Ø¯Ùˆ Ø£ØµÙ„ÙŠØ© â€” Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ ÙˆØ§Ù„Ø³ÙØ±.",
          bullets: [
            { t: "Ø§ÙØªØ­. ÙˆØ¬Ù‘Ù‡. Ø§Ù†ØªÙ‡Ù‰.", h: "Ù†ØµÙˆØµ Ù‚Ù„ÙŠÙ„Ø©â€”ÙˆØ¶ÙˆØ­ Ø£Ø¹Ù„Ù‰.", img: "widgetsStack" },
            { t: "ÙŠØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª", h: "Ø«Ø¨Ø§Øª ÙˆÙ…ÙˆØ«ÙˆÙ‚ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³ÙØ±.", img: "widgetsStack" },
            { t: "ØªÙ†Ø§Ø³Ù‚ Ø¯Ø§ÙƒÙ†/ÙØ§ØªØ­", h: "Ø§ØªØ³Ø§Ù‚ Ø§Ù„ØªØµÙ…ÙŠÙ….", img: "prayerGrid" }
          ]
        }
      },
      {
        key: "widgets",
        en: {
          badge: "Widgets & Watch",
          title: "Widgets that feel like part of iOS.",
          lead: "Next prayer, countdown, and progress â€” on Home Screen, Lock Screen, and Apple Watch.",
          bullets: [
            { t: "Widget wall", h: "Multiple sizes with consistent style.", img: "widgetsOverview" },
            { t: "Smart Stack moments", h: "Designed for quick glances.", img: "widgetsStack" },
            { t: "From athan to iqama", h: "Progress you can read instantly.", img: "lockscreenIqama" }
          ]
        },
        ar: {
          badge: "Ø§Ù„ÙˆÙŠØ¯Ø¬Øª ÙˆØ§Ù„Ø³Ø§Ø¹Ø©",
          title: "ÙˆÙŠØ¯Ø¬Øª ØªØ¨Ø¯Ùˆ Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† iOS.",
          lead: "Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ÙˆØ§Ù„Ø¹Ø¯Ù‘ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ÙˆØ´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… â€” Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„Ù‚ÙÙ„ ÙˆØ§Ù„Ø³Ø§Ø¹Ø©.",
          bullets: [
            { t: "Ø£Ø­Ø¬Ø§Ù… Ù…ØªØ¹Ø¯Ø¯Ø©", h: "ØªÙ†Ø³ÙŠÙ‚ Ù…ØªØ³Ù‚ Ø¨Ø£Ø³Ù„ÙˆØ¨ Apple.", img: "widgetsOverview" },
            { t: "Ù„Ø­Ø¸Ø§Øª Smart Stack", h: "Ù…ØµÙ…Ù…Ø© Ù„Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©.", img: "widgetsStack" },
            { t: "Ù…Ù† Ø§Ù„Ø£Ø°Ø§Ù† Ù„Ù„Ø¥Ù‚Ø§Ù…Ø©", h: "ØªÙ‚Ø¯Ù… ÙˆØ§Ø¶Ø­ ÙÙˆØ±Ø§Ù‹.", img: "lockscreenIqama" }
          ]
        }
      },
      {
        key: "radio",
        en: {
          badge: "Quran Radio",
          title: "Continuous Quran recitation.",
          lead: "Choose a station and start listening instantly â€” simple, calm, and focused.",
          bullets: [
            { t: "Pick a station", h: "Fast selection, minimal UI.", img: "quranRadio" },
            { t: "Listen anytime", h: "Perfect for daily routine.", img: "quranRadio" },
            { t: "Built-in harmony", h: "Matches the rest of the app.", img: "quranRadio" }
          ]
        },
        ar: {
          badge: "Ø±Ø§Ø¯ÙŠÙˆ Ø§Ù„Ù‚Ø±Ø¢Ù†",
          title: "ØªÙ„Ø§ÙˆØ© Ù‚Ø±Ø¢Ù†ÙŠØ© Ù…ØªÙˆØ§ØµÙ„Ø©.",
          lead: "Ø§Ø®ØªØ± Ù…Ø­Ø·Ø© ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ ÙÙˆØ±Ø§Ù‹ â€” ØªØ¬Ø±Ø¨Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆÙ‡Ø§Ø¯Ø¦Ø©.",
          bullets: [
            { t: "Ø§Ø®ØªØ± Ù…Ø­Ø·Ø©", h: "ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆØ³Ø±ÙŠØ¹Ø©.", img: "quranRadio" },
            { t: "Ø§Ø³ØªÙ…Ø§Ø¹ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª", h: "Ù…Ù†Ø§Ø³Ø¨ Ù„Ø±ÙˆØªÙŠÙ†Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ.", img: "quranRadio" },
            { t: "ØªÙ†Ø§ØºÙ… ÙƒØ§Ù…Ù„", h: "Ù…ØªÙ†Ø§Ø³Ù‚ Ù…Ø¹ Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.", img: "quranRadio" }
          ]
        }
      }
    ];

    // ==========================================================
    // 4) RENDER
    // ==========================================================
    let LANG = "en";

    function esc(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function applyTopCopy(){
      if(LANG === "ar"){
        document.documentElement.lang="ar";
        document.body.classList.add("rtl");
        document.getElementById("navTitle").textContent="AlAthan";
        document.getElementById("navSub").textContent="Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© â€¢ Ø§Ù„Ù‚Ø¨Ù„Ø© â€¢ Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„";
        document.getElementById("startBtn").textContent="Ø§Ø¨Ø¯Ø£";
        document.getElementById("heroKicker").textContent="Ù…ØµÙ…Ù… Ù„ÙŠØ¨Ø¯Ùˆ Ø£ØµÙ„ÙŠØ§Ù‹.";
        document.getElementById("heroTitle").textContent="Ø±ÙÙŠÙ‚Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„ØµÙ„Ø§Ø©.";
        document.getElementById("heroDesc").textContent="Ø£ÙˆÙ‚Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø©ØŒ Ø¨ÙˆØµÙ„Ø© Ù‚Ø¨Ù„Ø© Ø­ÙŠÙ‘Ø©ØŒ ÙˆØ¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ø°ÙƒÙŠ Ø¹Ù„Ù‰ Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ ÙˆØ§Ù„Ø¬Ø²ÙŠØ±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©.";
        document.getElementById("featuresBtn").textContent="Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚";
        document.getElementById("scrollBtn").textContent="Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙ…Ø±ÙŠØ±";
        document.getElementById("featuresLabel").textContent="Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚";
      }else{
        document.documentElement.lang="en";
        document.body.classList.remove("rtl");
        document.getElementById("navTitle").textContent="AlAthan";
        document.getElementById("navSub").textContent="Prayer times â€¢ Qibla â€¢ Lock Screen";
        document.getElementById("startBtn").textContent="Start";
        document.getElementById("heroKicker").textContent="Designed to feel native.";
        document.getElementById("heroTitle").textContent="Your daily prayer companion.";
        document.getElementById("heroDesc").textContent="Accurate prayer times, a live Qibla compass, and smart countdowns on your Lock Screen and Dynamic Island.";
        document.getElementById("featuresBtn").textContent="App features";
        document.getElementById("scrollBtn").textContent="Start scrolling";
        document.getElementById("featuresLabel").textContent="App features";
      }
    }

    function renderFeatures(){
      const lines = FEATURES[LANG] || [];
      document.getElementById("featuresText").textContent = lines.join("\n");
    }

    function renderChapters(){
      const host = document.getElementById("chapters");
      host.innerHTML = "";

      CHAPTERS.forEach((ch) => {
        const c = ch[LANG];

        const bulletsHtml = c.bullets.map((b,i)=>`
          <div class="bullet ${i===0 ? "active":""}" data-chapter="${ch.key}" data-bullet="${i}">
            <p class="k">${LANG==="ar" ? "Ù„Ù‚Ø·Ø©" : "Shot"} ${i+1}</p>
            <p class="t">${esc(b.t)}</p>
            <p class="h">${esc(b.h)}</p>
          </div>
        `).join("");

        const screensHtml = c.bullets.map((b,i)=>`
          <div class="screen ${i===0 ? "active":""}" data-bullet="${i}">
            <img class="img" data-asset="${esc(b.img)}" src="${esc(asset(b.img))}" alt="" loading="eager" />
            <div class="caption">
              <p class="t">${esc(b.t)}</p>
              <p class="s">${esc(b.h)}</p>
            </div>
          </div>
        `).join("");

        const section = document.createElement("section");
        section.className = "chapter";
        section.id = "chapter-" + ch.key;

        section.innerHTML = `
          <div class="container chapter-inner">
            <div class="reveal">
              <div class="badge">${esc(c.badge)}</div>
              <h3>${esc(c.title)}</h3>
              <p class="lead">${esc(c.lead)}</p>
              <div class="bullets">${bulletsHtml}</div>
            </div>

            <div class="mock-wrap reveal">
              <div class="phone" aria-label="Sticky screenshot mock">
                <div class="island" aria-hidden="true"></div>
                <div class="mock">${screensHtml}</div>
              </div>
            </div>
          </div>
        `;

        host.appendChild(section);
      });

      // bullet click => swap screen
      document.querySelectorAll(".bullet").forEach(b => {
        b.addEventListener("click", () => {
          const chapterKey = b.getAttribute("data-chapter");
          const idx = Number(b.getAttribute("data-bullet"));
          activateBullet(chapterKey, idx);
        });
      });
    }

    function activateBullet(chapterKey, bulletIndex){
      // activate bullet
      document.querySelectorAll(`.bullet[data-chapter="${chapterKey}"]`).forEach(el => {
        el.classList.toggle("active", Number(el.getAttribute("data-bullet")) === bulletIndex);
      });
      // activate screen
      document.querySelectorAll(`#chapter-${chapterKey} .screen`).forEach(el => {
        el.classList.toggle("active", Number(el.getAttribute("data-bullet")) === bulletIndex);
      });
    }

    // ==========================================================
    // 5) OBSERVERS (reveal + auto bullet advance)
    // ==========================================================
    let ioReveal, ioBullets;

    function wireObservers(){
      ioReveal?.disconnect();
      ioReveal = new IntersectionObserver((entries)=>{
        entries.forEach(e => { if(e.isIntersecting) e.target.classList.add("in"); });
      }, { threshold: 0.12 });
      document.querySelectorAll(".reveal").forEach(el => ioReveal.observe(el));

      ioBullets?.disconnect();
      ioBullets = new IntersectionObserver((entries)=>{
        const visible = entries.filter(e=>e.isIntersecting);
        if(!visible.length) return;
        const best = visible.sort((a,b)=>b.intersectionRatio - a.intersectionRatio)[0];
        const chapter = best.target.getAttribute("data-chapter");
        const bullet = Number(best.target.getAttribute("data-bullet"));
        if(chapter && Number.isFinite(bullet)) activateBullet(chapter, bullet);
      }, { threshold: [0.25,0.45,0.65], rootMargin: "-25% 0px -55% 0px" });

      document.querySelectorAll(".bullet").forEach(el => ioBullets.observe(el));
    }

    // ==========================================================
    // 6) THEME SWITCH â€” update all screenshots when system theme changes
    // ==========================================================
    function applyThemeAssets(){
      heroImg.src = asset("prayerGrid");
      document.querySelectorAll("img[data-asset]").forEach(img => {
        const k = img.getAttribute("data-asset");
        if(k && ASSETS[k]) img.src = asset(k);
      });
    }
    mqDark.addEventListener("change", applyThemeAssets);

    // ==========================================================
    // 7) PARALLAX
    // ==========================================================
    function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
    function onScrollParallax(){
      const hero = document.getElementById("hero");
      const media = document.getElementById("heroMedia");
      if(!hero || !media) return;
      const rect = hero.getBoundingClientRect();
      const progress = clamp((-rect.top) / rect.height, 0, 1);
      const y = Math.round(progress * 52);
      media.style.setProperty("--pY", `${y * -1}px`);
    }

    // ==========================================================
    // 8) LANGUAGE TOGGLE
    // ==========================================================
    function setLang(lang){
      LANG = lang;
      document.getElementById("btn-en").classList.toggle("active", lang==="en");
      document.getElementById("btn-ar").classList.toggle("active", lang==="ar");

      applyTopCopy();
      renderFeatures();
      renderChapters();
      wireObservers();
      applyThemeAssets();

      // reset each chapter to first bullet
      CHAPTERS.forEach(ch => activateBullet(ch.key, 0));
    }

    document.getElementById("btn-en").addEventListener("click", ()=>setLang("en"));
    document.getElementById("btn-ar").addEventListener("click", ()=>setLang("ar"));

    // ==========================================================
    // INIT
    // ==========================================================
    applyTopCopy();
    renderFeatures();
    renderChapters();
    wireObservers();
    applyThemeAssets();

    CHAPTERS.forEach(ch => activateBullet(ch.key, 0));
    onScrollParallax();
    window.addEventListener("scroll", onScrollParallax, { passive:true });
  </script>
</body>
</html>
